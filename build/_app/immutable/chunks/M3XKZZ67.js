import{d as C,g as y,w as h}from"./DMn3FX1C.js";import"./DsnmJJEf.js";function E(e,r,i,n){var a,g,f=!1,R=i.length>=2,V=(s,u,c)=>{if(a=u,R&&(g=s),!f){let d=r(s,u,c);if(r.length<2)u(d);else return d}f=!1},p=C(e,V,n),k=!Array.isArray(e);function Q(s){var u=i(s,g);k?(f=!0,e.set(u)):u.forEach((c,d)=>{f=!0,e[d].set(c)}),f=!1}var v=!1;function w(s){var u,c,d,l;if(v){l=s(y(p)),a(l);return}var q=p.subscribe(x=>{v?u?c=!0:u=!0:d=x});l=s(d),v=!0,a(l),q(),v=!1,c&&(l=y(p)),u&&Q(l)}return{subscribe:p.subscribe,set(s){w(()=>s)},update:w}}const P=20,o=h([]),T=h(null),b=new Map,D=e=>{if(b.has(e))return;const r=setTimeout(()=>{b.delete(e),A(e)},1e3);b.set(e,r)},j=e=>{const r=b.get(e);r&&clearTimeout(r)};function B(e,r=!0){r&&e.id&&j(e.id),o.update(i=>i.map(n=>n.id===e.id?{...n,...e}:n))}function F(e){o.update(r=>[e,...r].slice(0,P))}function H(e){y(o).find(r=>r.id===e.id)?B(e):F(e)}function L(e){o.update(r=>(e?D(e):r.forEach(i=>{D(i.id)}),r.map(i=>i.id===e||e===void 0?{...i,visible:!1}:i)))}function A(e){o.update(r=>e===void 0?[]:r.filter(i=>i.id!==e))}function G(e){T.set(e)}function J(e){let r;T.update(i=>(r=e-(i||0),null)),o.update(i=>i.map(n=>({...n,pauseDuration:n.pauseDuration+r})))}const N={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function K(e={}){return{toasts:E(o,i=>i.map(n=>({...e,...e[n.type],...n,duration:n.duration||e[n.type]?.duration||e?.duration||N[n.type],style:[e.style,e[n.type]?.style,n.style].join(";")})),i=>i),pausedAt:T}}const U=e=>typeof e=="function",S=(e,r)=>U(e)?e(r):e,W=(()=>{let e=0;return()=>(e+=1,e.toString())})(),X=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){const r=matchMedia("(prefers-reduced-motion: reduce)");e=!r||r.matches}return e}})(),_=(e,r="blank",i)=>({createdAt:Date.now(),visible:!0,type:r,message:e,pauseDuration:0,icon:i?.icon,duration:i?.duration,iconTheme:i?.iconTheme,position:i?.position,props:i?.props,id:i?.id||W()}),m=e=>(r,i)=>{const n=_(r,e,i);return H(n),n.id},t=(e,r)=>m("blank")(e,r);t.error=m("error");t.success=m("success");t.loading=m("loading");t.custom=m("custom");t.dismiss=e=>{L(e)};t.remove=e=>A(e);t.promise=(e,r,i)=>{const n=t.loading(r.loading,{...i,...i?.loading});return e.then(a=>(t.success(S(r.success,a),{id:n,...i,...i?.success}),a)).catch(a=>{t.error(S(r.error,a),{id:n,...i,...i?.error})}),e};const M=h([]),Y=e=>{M.update(r=>{const i=r.find(n=>n.id===e.id);return i?i.quantity++:r.push({...e,quantity:1}),r}),t.success(`${e.name} added to cart`)},Z=e=>{M.update(r=>r.filter(i=>i.id!==e.id)),t.error(`${e.name} removed from cart`)};export{Y as a,B as b,M as c,J as e,X as p,Z as r,G as s,t,K as u};
